@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* StudyBuddy Light Theme - Purple/Pink Gradient base */
        /* We'll use the gradient for the body, but define HSL variables for components */

        /* Text Colors */
        --foreground: 260 10% 20%;
        /* #333ish but cooler */
        --background: 330 20% 96%;
        /* #fff0f5 - pinkish white for fallbacks */

        /* Card/Surface Colors */
        --card: 0 0% 100%;
        --card-foreground: 260 10% 20%;
        --popover: 0 0% 100%;
        --popover-foreground: 260 10% 20%;

        /* Primary Brand Colors (matching the buttons/gradients) */
        --primary: 320 25% 45%;
        /* #8B5A7C specific button bg from Auth */
        --primary-foreground: 0 0% 98%;

        --secondary: 260 20% 96%;
        --secondary-foreground: 260 10% 20%;

        --muted: 320 10% 90%;
        --muted-foreground: 260 5% 40%;

        --accent: 320 30% 85%;
        --accent-foreground: 260 10% 20%;

        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 0 0% 98%;

        --border: 320 15% 85%;
        /* Soft pinkish border */
        --input: 15 35% 92%;
        /* #F5E6E0 from Auth */
        --ring: 320 25% 45%;

        --radius: 0.75rem;
    }

    .dark {
        /* StudyBuddy Dark Theme - Deep Space */

        /* Text Colors */
        --foreground: 260 20% 95%;
        /* #E8E0F0 */
        --background: 240 40% 7%;
        /* #0a0a1a */

        /* Card/Surface Colors - Glassmorphic look handled by components often, but defaults here */
        --card: 240 30% 12%;
        /* #141428 approx */
        --card-foreground: 260 20% 95%;
        --popover: 240 30% 12%;
        --popover-foreground: 260 20% 95%;

        /* Primary Brand Colors */
        --primary: 260 30% 50%;
        /* #6B5A9E */
        --primary-foreground: 260 20% 95%;

        --secondary: 240 25% 20%;
        --secondary-foreground: 260 20% 95%;

        --muted: 240 25% 20%;
        --muted-foreground: 240 20% 80%;

        --accent: 260 30% 25%;
        --accent-foreground: 260 20% 95%;

        --destructive: 0 62.8% 30.6%;
        --destructive-foreground: 0 0% 98%;

        --border: 240 20% 25%;
        --input: 240 25% 22%;
        /* 40, 40, 70 approx */
        --ring: 260 30% 50%;
    }
}

@layer base {
    * {
        @apply border-border;
    }

    /* Smooth theme transitions - only for colors */
    *,
    *::before,
    *::after {
        transition-property: color, background-color, border-color, fill, stroke;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
    }

    /* Disable transitions during theme change for instant switch */
    .theme-transitioning * {
        transition: none !important;
    }

    body {
        @apply bg-background text-foreground;
        font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
        font-family: 'Montserrat', 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        /* Global Background Gradient */
        min-height: 100vh;
        background-attachment: fixed;
        transition: background 150ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Light Mode Gradient - Lighter Pastels for readability */
    :root body {
        background: linear-gradient(180deg, #E6E0F5 0%, #F5E6EE 50%, #F5E6E6 100%);
    }

    /* Dark Mode Gradient */
    .dark body {
        background: linear-gradient(180deg, #0a0a1a 0%, #1a1a3a 30%, #2a1a4a 60%, #3a2a5a 100%);
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Space Grotesk', 'Outfit', sans-serif;
        font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
        letter-spacing: -0.02em;
    }
}

@layer utilities {
    .text-balance {
        text-wrap: balance;
    }

    .glass-card {
        @apply backdrop-blur-xl border border-white/20 dark:border-white/10 shadow-xl;
        background-color: rgba(255, 255, 255, 0.85);
    }

    .dark .glass-card {
        background-color: rgba(20, 20, 40, 0.7);
    }
}

/* Smooth page transitions */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.page-transition {
    animation: fadeIn 0.3s ease-out;
}

/* Loading animations */
@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }

    100% {
        background-position: 200% 0;
    }
}

.animate-shimmer {
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(255, 255, 255, 0.05) 50%,
            transparent 100%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* Grid background pattern */
.grid-pattern {
    background-image:
        linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 0, 0, 0.03) 1px, transparent 1px);
    background-size: 40px 40px;
}

.dark .grid-pattern {
    background-image:
        linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
}

/* Responsive breakpoint for extra small devices */
@media (min-width: 475px) {
    .xs\:flex-row {
        flex-direction: row;
    }

    .xs\:flex-none {
        flex: none;
    }

    .xs\:w-auto {
        width: auto;
    }

    .xs\:items-center {
        align-items: center;
    }
}

/* OPTIMIZATION: content-visibility for long lists */
.list-item-optimized {
    content-visibility: auto;
    contain-intrinsic-size: 0 60px;
}

.message-item-optimized {
    content-visibility: auto;
    contain-intrinsic-size: 0 80px;
}

.friend-item-optimized {
    content-visibility: auto;
    contain-intrinsic-size: 0 72px;
}